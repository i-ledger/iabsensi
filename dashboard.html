<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Dashboard Admin</title>
</head>
<body>
  <h2>Dashboard Admin</h2>
  <div id="dashboardInfo"></div>

  <script>
    // Mendapatkan parameter email dari URL
    const urlParams = new URLSearchParams(window.location.search);
    const email = urlParams.get('email');

    if (email) {
      // Membuat URL request untuk mendapatkan status akun admin dari Google Apps Script
      const apiUrl = `https://script.google.com/macros/s/AKfycby49racBkClV3xOVv1tfxKS4vojCjiImeFetm-qYByVSvwV3klUXHAOjtpd5QPxAjEvyw/exec?email=${encodeURIComponent(email)}`;

      fetch(apiUrl)
        .then(res => res.json())
        .then(result => {
          if (result.success) {
            if (result.status === "aktif") {
              document.getElementById("dashboardInfo").innerText = `Selamat datang, ${email}. Status akun Anda aktif!`;
            } else {
              document.getElementById("dashboardInfo").innerText = "Akun Anda sudah expired.";
            }
          } else {
            document.getElementById("dashboardInfo").innerText = result.message || "Terjadi kesalahan.";
          }
        })
        .catch(err => {
          document.getElementById("dashboardInfo").innerText = "Terjadi kesalahan: " + err.message;
        });
    } else {
      document.getElementById("dashboardInfo").innerText = "Email tidak ditemukan.";
    }
  </script>
</body>
</html>
